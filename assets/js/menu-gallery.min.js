let manifestCache=new Map;document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-menu-gallery]").forEach(async e=>{var t=e.dataset.menuGallery;let a=e.dataset.menuManifest||`assets/menus/${t}.json`;var n=e.querySelector("picture");let l=n.querySelector("source"),i=(l||((l=document.createElement("source")).type="image/webp",n.prepend(l)),n.querySelector(".menu-image")||n.querySelector("img")),c=e.querySelector(".image-counter"),s=e.querySelector(".prev-btn"),o=e.querySelector(".next-btn");let d=await(manifestCache.has(a)?manifestCache.get(a):(n=(async()=>{try{var e=await fetch(a);if(!e.ok)throw new Error("Manifest not found");var n=await e.json();let t=a.replace(/[^/]+$/,"");return Array.isArray(n)?n.map(e=>Array.isArray(e)?e.map(e=>""+t+e):[""+t+e]):[]}catch{return[]}})(),manifestCache.set(a,n),n=await n,manifestCache.set(a,n),n));if(0===d.length)e.innerHTML=`<p>No ${t.replace("-"," ")} images available.</p>`;else{let n=0,a=()=>{var e=d[n];l.srcset=e[0],i.src=e[1]||e[0],c.textContent=n+1+" / "+d.length,s.disabled=0===n,o.disabled=n===d.length-1},r=(s.addEventListener("click",()=>{0<n&&(n--,a())}),o.addEventListener("click",()=>{n<d.length-1&&(n++,a())}),null);e.addEventListener("pointerdown",e=>{r=e.clientX}),e.addEventListener("pointermove",e=>{var t;null!==r&&(50<(t=e.clientX-r)&&0<n?(n--,r=e.clientX,a()):t<-50&&n<d.length-1&&(n++,r=e.clientX,a()))}),e.addEventListener("pointerup",()=>{r=null}),e.addEventListener("pointercancel",()=>{r=null}),a()}})});