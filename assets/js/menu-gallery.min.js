let manifestCache=new Map;document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-menu-gallery]").forEach(async e=>{var t=e.dataset.menuGallery;let a=e.dataset.menuManifest||`assets/menus/${t}.json`;var n=e.querySelector(".menu-image"),r=n.parentElement,l=n.cloneNode();l.style.position="absolute",l.style.inset="0",l.style.opacity=0,l.style.pointerEvents="none",n.style.pointerEvents="none",r.style.position="relative",r.appendChild(l);let i=n,s=l,o=e.querySelector(".image-counter"),c=e.querySelector(".prev-btn"),d=e.querySelector(".next-btn");let p=await(manifestCache.has(a)?manifestCache.get(a):(r=(async()=>{try{var e=await fetch(a);if(!e.ok)throw new Error("Manifest not found");var n=await e.json();let t=a.replace(/[^/]+$/,"");return Array.isArray(n)?n.map(e=>""+t+e):[]}catch{return[]}})(),manifestCache.set(a,r),r=await r,manifestCache.set(a,r),r));if(0===p.length)e.innerHTML=`<p>No ${t.replace("-"," ")} images available.</p>`;else{let n=p.map(e=>{var t=new Image;return t.src=e,t}),a=0,r=()=>{let t=n[a];var e=()=>{s.src=t.src,o.textContent=a+1+" / "+p.length,c.disabled=0===a,d.disabled=a===p.length-1,requestAnimationFrame(()=>{i.style.opacity=0,s.style.opacity=1});var e=i;i=s,s=e};t.complete?e():t.addEventListener("load",e,{once:!0})},l=(c.addEventListener("click",()=>{0<a&&(a--,r())}),d.addEventListener("click",()=>{a<p.length-1&&(a++,r())}),null);e.addEventListener("pointerdown",e=>{l=e.clientX}),e.addEventListener("pointermove",e=>{var t;null!==l&&(50<(t=e.clientX-l)&&0<a?(a--,l=e.clientX,r()):t<-50&&a<p.length-1&&(a++,l=e.clientX,r()))}),e.addEventListener("pointerup",()=>{l=null}),e.addEventListener("pointercancel",()=>{l=null}),r()}})});