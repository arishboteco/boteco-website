document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-menu-gallery]").forEach(async e=>{let l=e.dataset.menuGallery;var t=e.querySelector(".menu-image");let a=t.closest("picture");var n=(a||t).parentElement,r=a?a.cloneNode(!0):t.cloneNode();r.style.position="absolute",r.style.inset="0",r.style.opacity=0,r.style.pointerEvents="none",(a||t).style.pointerEvents="none",n.style.position="relative",n.appendChild(r);let o=a||t,i=r,s=e.querySelector(".image-counter"),c=e.querySelector(".prev-btn"),d=e.querySelector(".next-btn");let u=await(async()=>{var e,t=Array.from({length:50},(e,n)=>{let r=`assets/menus/${l}-pg${n+1}.jpg`;return new Promise(e=>{var t=new Image;t.onload=()=>e({url:r,index:n}),t.onerror=()=>e({url:null,index:n}),t.src=r})}),n=[];for(e of await Promise.all(t)){if(!e.url)break;n.push(e.url)}return n})();if(0===u.length)e.innerHTML=`<p>No ${l.replace("-"," ")} images available.</p>`;else{let t=u.map(e=>{var t=new Image;return t.src=e,t}),r=0,n=()=>{let n=t[r];var e=()=>{a?(t=i.querySelector("source"),e=i.querySelector("img"),t.srcset=n.src.replace(/\.(jpg|jpeg|png)$/i,".webp"),e.src=n.src):i.src=n.src,s.textContent=r+1+" / "+u.length,c.disabled=0===r,d.disabled=r===u.length-1,requestAnimationFrame(()=>{o.style.opacity=0,i.style.opacity=1});var e,t=o;o=i,i=t};n.complete?e():n.addEventListener("load",e,{once:!0})},l=(c.addEventListener("click",()=>{0<r&&(r--,n())}),d.addEventListener("click",()=>{r<u.length-1&&(r++,n())}),null);e.addEventListener("pointerdown",e=>{l=e.clientX}),e.addEventListener("pointermove",e=>{var t;null!==l&&(50<(t=e.clientX-l)&&0<r?(r--,l=e.clientX,n()):t<-50&&r<u.length-1&&(r++,l=e.clientX,n()))}),e.addEventListener("pointerup",()=>{l=null}),e.addEventListener("pointercancel",()=>{l=null}),n()}})});