document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-menu-gallery]").forEach(async e=>{let r=e.dataset.menuGallery;var t=e.querySelector(".menu-image"),n=t.parentElement,l=t.cloneNode();l.style.position="absolute",l.style.inset="0",l.style.opacity=0,l.style.pointerEvents="none",t.style.pointerEvents="none",n.style.position="relative",n.appendChild(l);let i=t,o=l,s=e.querySelector(".image-counter"),d=e.querySelector(".prev-btn"),c=e.querySelector(".next-btn");let u=await(async()=>{var e,t=Array.from({length:50},(e,n)=>{let l=`assets/menus/${r}-pg${n+1}.jpg`;return new Promise(e=>{var t=new Image;t.onload=()=>e({url:l,index:n}),t.onerror=()=>e({url:null,index:n}),t.src=l})}),n=[];for(e of await Promise.all(t)){if(!e.url)break;n.push(e.url)}return n})();if(0===u.length)e.innerHTML=`<p>No ${r.replace("-"," ")} images available.</p>`;else{let n=u.map(e=>{var t=new Image;return t.src=e,t}),l=0,r=()=>{let t=n[l];var e=()=>{o.src=t.src,s.textContent=l+1+" / "+u.length,d.disabled=0===l,c.disabled=l===u.length-1,requestAnimationFrame(()=>{i.style.opacity=0,o.style.opacity=1});var e=i;i=o,o=e};t.complete?e():t.addEventListener("load",e,{once:!0})},a=(d.addEventListener("click",()=>{0<l&&(l--,r())}),c.addEventListener("click",()=>{l<u.length-1&&(l++,r())}),null);e.addEventListener("pointerdown",e=>{a=e.clientX}),e.addEventListener("pointermove",e=>{var t;null!==a&&(50<(t=e.clientX-a)&&0<l?(l--,a=e.clientX,r()):t<-50&&l<u.length-1&&(l++,a=e.clientX,r()))}),e.addEventListener("pointerup",()=>{a=null}),e.addEventListener("pointercancel",()=>{a=null}),r()}})});