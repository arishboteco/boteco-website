document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-menu-gallery]").forEach(async e=>{let l=e.dataset.menuGallery;var t=e.querySelector(".menu-image"),n=t.parentElement,r=n.parentElement,a=n.cloneNode(!0),o=a.querySelector("img");a.style.position="absolute",a.style.inset="0",a.style.opacity=0,a.style.pointerEvents="none",t.style.pointerEvents="none",r.style.position="relative",r.appendChild(a);let i=n,s=t,c=a,d=o,u=e.querySelector(".image-counter"),p=e.querySelector(".prev-btn"),y=e.querySelector(".next-btn");let m=await(async()=>{var e,t=Array.from({length:50},(e,n)=>{let r=`assets/menus/${l}-pg${n+1}.jpg`;return new Promise(e=>{var t=new Image;t.onload=()=>e({url:r,index:n}),t.onerror=()=>e({url:null,index:n}),t.src=r})}),n=[];for(e of await Promise.all(t)){if(!e.url)break;n.push(e.url)}return n})();if(0===m.length)e.innerHTML=`<p>No ${l.replace("-"," ")} images available.</p>`;else{let n=m.map(e=>{var t=new Image;return t.src=e,t}),r=0,l=()=>{let t=n[r];var e=()=>{var e=t.src.replace(".jpg",".webp"),e=(c.querySelector("source").srcset=e,d.src=t.src,u.textContent=r+1+" / "+m.length,p.disabled=0===r,y.disabled=r===m.length-1,requestAnimationFrame(()=>{i.style.opacity=0,c.style.opacity=1}),i),e=(i=c,c=e,s);s=d,d=e};t.complete?e():t.addEventListener("load",e,{once:!0})},a=(p.addEventListener("click",()=>{0<r&&(r--,l())}),y.addEventListener("click",()=>{r<m.length-1&&(r++,l())}),null);e.addEventListener("pointerdown",e=>{a=e.clientX}),e.addEventListener("pointermove",e=>{var t;null!==a&&(50<(t=e.clientX-a)&&0<r?(r--,a=e.clientX,l()):t<-50&&r<m.length-1&&(r++,a=e.clientX,l()))}),e.addEventListener("pointerup",()=>{a=null}),e.addEventListener("pointercancel",()=>{a=null}),l()}})});