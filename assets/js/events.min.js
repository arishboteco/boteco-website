function isValidUrl(e){try{return new URL(e),!0}catch{return!1}}function sortByDate(e){return e.slice().sort((e,t)=>new Date(e.date)-new Date(t.date))}function renderEvents(e,t,c,n){if(e&&0!==e.length){t.innerHTML="";let o=document.createDocumentFragment();e.forEach(n=>{var e=new Date(n.date),e=isNaN(e)?n.date:e.toLocaleDateString("en-US",{month:"long",day:"numeric"}),t=document.createElement("div"),a=(t.className="col-md-4",document.createElement("div")),d=(a.className="card event-card h-100",document.createElement("img"));d.loading="lazy",d.src=c+"/"+n.image,d.className="card-img-top",d.alt=n.title;let r=d;isValidUrl(n.link)&&((s=document.createElement("a")).href=n.link,s.target="_blank",s.rel="noopener noreferrer",s.dataset.bsToggle="modal",s.dataset.bsTarget="#eventLinkModal",s.addEventListener("click",e=>{var t=document.getElementById("eventLinkModal");"undefined"!=typeof bootstrap&&t&&(e.preventDefault(),(e=document.getElementById("eventLinkIframe"))&&(e.src=n.link),bootstrap.Modal.getOrCreateInstance(t).show())}),s.appendChild(d),r=s);var d=document.createElement("div"),s=(d.className="card-body",document.createElement("h5")),l=(s.className="card-title",s.textContent=n.title,document.createElement("p"));l.className="card-text",l.textContent=e,d.appendChild(s),d.appendChild(l),a.appendChild(r),a.appendChild(d),t.appendChild(a),o.appendChild(t)}),t.appendChild(o)}else t.innerHTML=`<p class="text-center w-100">${n}</p>`}async function fetchAndRenderEvents(t,n,a,d,r){try{var e,s=await fetch(t);s.ok&&(e=await s.json(),Array.isArray(e))&&0<e.length?renderEvents(sortByDate(e),n,d,r):a?a.style.display="none":renderEvents([],n,d,r)}catch(e){console.warn(`Could not load events from ${t}:`,e),a?a.style.display="none":renderEvents([],n,d,r)}}async function loadEvents(){var e=document.getElementById("events"),t=document.getElementById("events-grid"),n=document.getElementById("events-archive"),a=document.getElementById("archive-grid");e&&t&&(e=fetchAndRenderEvents("assets/events/events.json",t,null,"assets/events","No upcoming events"),t=n&&a?fetchAndRenderEvents("assets/events/archive/archive.json",a,n,"assets/events/archive","No past events"):Promise.resolve(),await Promise.all([e,t]))}document.addEventListener("DOMContentLoaded",loadEvents);